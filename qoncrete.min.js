!function(a){"use strict";function j(a){a=k(a),c=a.sourceID,d=a.apiToken,e=b+"/"+c+"?token="+d}function k(a){if(!(a&&a.sourceID&&a.apiToken))throw new p(h.CLIENT_ERROR,"`sourceID` and `apiToken` must be specified.");if(a.sourceID=a.sourceID.toLowerCase(),a.apiToken=a.apiToken.toLowerCase(),!r(a.sourceID)||!r(a.apiToken))throw new p(h.CLIENT_ERROR,"`sourceID` and `apiToken` must be valid UUIDs.");return a}function l(a){return this.timeoutAfter=a.timeoutAfter||g,this.retryOnTimeout=a.retryOnTimeout||0,this.request=new XMLHttpRequest,this.body=a.body,this}function m(){return this.retryOnTimeout<=0?this.onError(new p(h.TIMEDOUT,"The request took too long time.")):new l({timeoutAfter:this.timeoutAfter,retryOnTimeout:this.retryOnTimeout-1,body:this.body}).onSuccess(this.onSuccess).onError(this.onError).done()}function n(){var a=this.request;if(a.readyState===i.DONE){if(204===a.status)return this.onSuccess();var b=a.status>=400&&a.status<500?h.CLIENT_ERROR:h.SERVER_ERROR;return this.onError(new p(b,a.responseText))}}function o(a){this.onError(new p(h.NETWORK_ERROR,a))}function p(a,b){this.code=a,this.message=b,this.stack=this.name+" at "+(new Error).stack.match(/[^\s]+$/)}function q(){}function r(a){return/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/.test(a)}if(a.Qoncrete)throw new Error("`Qoncrete` is already defined in the global namespace!");var b="https://log.qoncrete.com",c=null,d=null,e=null,f={SECOND:1e3},g=15*f.SECOND,h={INVALID_BODY:"INVALID_BODY",TIMEDOUT:"TIMEDOUT",CLIENT_ERROR:"CLIENT_ERROR",SERVER_ERROR:"SERVER_ERROR",NETWORK_ERROR:"NETWORK_ERROR"},i={DONE:4};j.prototype.send=function(a,b,c){return b=b||{},b.body=a,"function"!=typeof c?new l(b):new l(b).onSuccess(c).onError(c).done()},l.prototype.onSuccess=function(a){return"function"!=typeof a&&(a=q),this.onSuccess=a,this},l.prototype.onError=function(a){return"function"!=typeof a&&(a=q),this.onError=a,this},l.prototype.done=function(){try{this.body=JSON.stringify(this.body)}catch(a){return this.onError(new p(h.INVALID_BODY,a))}this.request.ontimeout=m.bind(this),this.request.onload=n.bind(this),this.request.onerror=o.bind(this),this.request.open("GET",e+"&body="+encodeURIComponent(this.body),!0),this.request.timeout=this.timeoutAfter,this.request.send(null)},Object.setPrototypeOf(p,Error),p.prototype=Object.create(Error.prototype),p.prototype.name="QoncreteError",p.prototype.message="",p.prototype.constructor=p,a.Qoncrete=j}(this);